{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neuropilot - Cognitive Design Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @font-face {
            font-family: "FuturaLT";
            src: url("{% static 'fonts/futura-lt/FuturaLT.ttf' %}") format("truetype");
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: "FuturaLT";
            src: url("{% static 'fonts/futura-lt/FuturaLT-Bold.ttf' %}") format("truetype");
            font-weight: bold;
            font-style: normal;
        }

        /* Cognitive Accessibility Improvements */
        :root {
            --focus-ring: 3px solid #667eea;
            --reduced-motion: prefers-reduced-motion;
        }

        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        body {
            font-family: "FuturaLT", sans-serif;
            background: linear-gradient(-45deg, #667eea, #764ba2, #5a67d8, #805ad5);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: #1a202c;
            letter-spacing: 0.3px;
            position: relative;
            overflow-x: hidden;
            line-height: 1.6; /* Improved readability */
        }

        /* Focus styles for keyboard navigation */
        button:focus-visible,
        a:focus-visible,
        input:focus-visible {
            outline: var(--focus-ring);
            outline-offset: 2px;
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            body {
                background: #000;
                color: #fff;
            }
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Neuropilot ML Status Indicator */
        .ml-status-indicator {
            transition: all 0.3s ease;
        }
        
        .ml-status-active {
            background: linear-gradient(45deg, #10b981, #059669);
            animation: pulse 2s infinite;
        }
        
        .ml-status-inactive {
            background: #6b7280;
        }

        /* Cognitive Load Optimized Animations */
        .cognitive-safe-animation {
            animation-duration: 0.5s;
            animation-fill-mode: both;
        }

        /* Simplified particle effects for reduced cognitive load */
        .particle {
            position: fixed;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            pointer-events: none;
            animation: float 20s infinite;
            z-index: 0;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) translateX(0) scale(1);
                opacity: 0.3;
            }
            50% {
                transform: translateY(-100px) translateX(50px) scale(1.2);
                opacity: 0.6;
            }
        }

        /* Neuropilot Suggestion Panel */
        .suggestion-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .suggestion-item {
            transition: all 0.2s ease;
            border-left: 4px solid transparent;
        }

        .suggestion-item:hover {
            border-left-color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }

        /* Rest of your existing styles remain the same */
        .navbar {
            animation: slideDown 0.6s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero-content {
            animation: fadeInUp 0.8s ease-out 0.2s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .brain-icon {
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        .feature-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.7s;
        }

        .feature-card:hover::before {
            left: 100%;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
        }

        .btn {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }

        .btn:hover::after {
            animation: ripple 1s ease-out;
        }

        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        @keyframes glow {
            0%, 100% {
                text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            }
            50% {
                text-shadow: 0 0 30px rgba(255, 255, 255, 0.8);
            }
        }

        .glow-text {
            animation: glow 3s ease-in-out infinite;
        }

        .image-hover {
            transition: all 0.5s ease;
        }

        .image-hover:hover {
            transform: scale(1.05);
        }

        @keyframes floating {
            0% { transform: translate(0, 0px); }
            50% { transform: translate(0, 15px); }
            100% { transform: translate(0, -0px); }
        }

        .floating {
            animation: floating 3s ease-in-out infinite;
        }

        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .testimonial-card {
            transition: all 0.3s ease;
        }

        .testimonial-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Animated background particles -->
    <div class="particle" style="width: 100px; height: 100px; top: 10%; left: 20%; animation-delay: 0s;"></div>
    <div class="particle" style="width: 150px; height: 150px; top: 60%; left: 80%; animation-delay: 2s;"></div>
    <div class="particle" style="width: 80px; height: 80px; top: 80%; left: 10%; animation-delay: 4s;"></div>
    <div class="particle" style="width: 120px; height: 120px; top: 30%; left: 70%; animation-delay: 1s;"></div>
    <div class="particle" style="width: 90px; height: 90px; top: 50%; left: 40%; animation-delay: 3s;"></div>

    <!-- Navbar with ML Status -->
    <nav class="navbar glass sticky top-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-2 sm:gap-3">
                    <svg class="brain-icon w-8 h-8 sm:w-10 sm:h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M21.33 12.91c.09 1.55-.62 3.04-1.89 3.95.77.82 1.16 1.93 1.01 3.05-.19 1.39-1.19 2.55-2.54 2.95-1.15.34-2.38.14-3.38-.55-.92.64-2.05.98-3.18.98-1.13 0-2.26-.34-3.18-.98-1 .69-2.23.89-3.38.55-1.35-.4-2.35-1.56-2.54-2.95-.15-1.12.24-2.23 1.01-3.05-1.27-.91-1.98-2.4-1.89-3.95.09-1.55.98-2.95 2.4-3.71-.47-.99-.54-2.14-.19-3.22.44-1.37 1.5-2.46 2.83-2.91C6.53 2.8 7.8 2.9 8.89 3.45c.96-.64 2.11-.99 3.27-.99s2.31.35 3.27.99c1.09-.55 2.36-.65 3.58-.38 1.33.45 2.39 1.54 2.83 2.91.35 1.08.28 2.23-.19 3.22 1.42.76 2.31 2.16 2.4 3.71z"/>
                    </svg>
                    <span class="text-xl sm:text-2xl font-bold text-white">Neuropilot</span>
                </div>
                <div class="flex items-center gap-2 sm:gap-4">
                    <!-- ML Status Indicator -->
                    <div id="mlStatus" class="hidden sm:flex items-center gap-2 px-3 py-1 rounded-full text-white text-sm ml-status-inactive">
                        <div class="w-2 h-2 rounded-full bg-current"></div>
                        <span>AI Analyzing</span>
                    </div>
                    <a href="#features" class="hidden md:block text-white hover:text-purple-200 transition-colors font-medium">Features</a>
                    <a href="#about" class="hidden md:block text-white hover:text-purple-200 transition-colors font-medium">About</a>
                    <a href="#testimonials" class="hidden md:block text-white hover:text-purple-200 transition-colors font-medium">Testimonials</a>
                    <a href="{% url 'login' %}" class="btn bg-white text-purple-600 px-3 sm:px-6 py-2 rounded-lg text-sm sm:text-base font-semibold hover:bg-purple-50">Login</a>
                    <a href="{% url 'register' %}" class="btn bg-purple-600 text-white px-3 sm:px-6 py-2 rounded-lg text-sm sm:text-base font-semibold hover:bg-purple-700">Start</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Neuropilot AI Assistant Panel -->
    <div id="aiAssistant" class="fixed bottom-6 right-6 z-40 transition-all duration-300 transform hover:scale-105">
        <div class="suggestion-panel rounded-2xl p-4 max-w-sm shadow-2xl" style="display: none;">
            <div class="flex items-center justify-between mb-3">
                <h3 class="font-bold text-gray-800 text-sm">ðŸ§  Neuropilot Suggestions</h3>
                <button onclick="hideSuggestions()" class="text-gray-400 hover:text-gray-600 text-lg" aria-label="Close suggestions">
                    Ã—
                </button>
            </div>
            <div id="suggestionList" class="space-y-2">
                <!-- Suggestions will be populated here -->
            </div>
            <div class="mt-3 pt-3 border-t border-gray-200">
                <div class="flex items-center justify-between text-xs text-gray-500">
                    <span>Confidence: <span id="confidenceScore">0%</span></span>
                    <span id="suggestionTime" class="text-gray-400"></span>
                </div>
            </div>
        </div>
        <button onclick="toggleAssistant()" class="ml-status-active text-white p-4 rounded-full shadow-2xl btn" aria-label="Toggle AI Assistant">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
            </svg>
        </button>
    </div>

    <!-- Hero Section -->
    <section class="relative z-10 container mx-auto px-4 sm:px-6 py-12 sm:py-20">
        <div class="hero-content text-center max-w-4xl mx-auto">
            <h1 class="glow-text text-3xl sm:text-5xl lg:text-6xl font-bold text-white mb-4 sm:mb-6">Welcome to Neuropilot</h1>
            <p class="text-lg sm:text-xl lg:text-2xl text-white/90 mb-6 sm:mb-8">Your AI-Powered Creative Design Tool with Real-time Cognitive Assistance</p>
            <p class="text-sm sm:text-base lg:text-lg text-white/80 mb-8 sm:mb-12 max-w-2xl mx-auto">
                Experience the future of accessible design with our ML-powered hesitation detection and intelligent command prediction system.
            </p>
            
            <!-- Real-time ML Demo -->
            <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-8 border border-white/20">
                <div class="flex items-center justify-center gap-4 mb-4">
                    <div id="demoStatus" class="flex items-center gap-2 text-white">
                        <div class="w-3 h-3 rounded-full bg-green-400 animate-pulse"></div>
                        <span class="text-sm font-medium">AI Model Active</span>
                    </div>
                    <div class="text-white text-sm">
                        <span>Confidence: </span>
                        <span id="demoConfidence" class="font-bold">87%</span>
                    </div>
                </div>
                <p class="text-white/80 text-sm mb-4">Try interacting with this page - our AI learns from your behavior patterns</p>
                <button onclick="runDemoPrediction()" class="btn bg-white/20 text-white px-6 py-2 rounded-lg text-sm font-semibold hover:bg-white/30">
                    Test AI Prediction
                </button>
            </div>

            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="{% url 'register' %}" class="btn bg-white text-purple-600 px-6 sm:px-8 py-3 sm:py-4 rounded-lg text-base sm:text-lg font-semibold hover:bg-purple-50 inline-flex items-center justify-center gap-2">
                    <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                    Start Creating
                </a>
                <a href="#features" class="btn bg-purple-600/80 backdrop-blur text-white px-6 sm:px-8 py-3 sm:py-4 rounded-lg text-base sm:text-lg font-semibold hover:bg-purple-700 inline-flex items-center justify-center gap-2">
                    <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    Learn More
                </a>
            </div>
        </div>
        
        <!-- Hero Image -->
        <div class="mt-16 max-w-5xl mx-auto">
            <div class="relative rounded-3xl overflow-hidden shadow-2xl image-hover floating">
                <img src="https://images.unsplash.com/photo-1558655146-9f40138edfeb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2064&q=80" 
                     alt="Neuropilot AI design interface showing cognitive accessibility tools and ML-powered features" 
                     class="w-full h-auto">
            </div>
        </div>
    </section>

    <!-- Features Section - Updated with ML Features -->
    <section id="features" class="relative z-10 container mx-auto px-4 sm:px-6 py-12 sm:py-20">
        <div class="text-center mb-12 sm:mb-16">
            <h2 class="text-3xl sm:text-4xl font-bold text-white mb-4">AI-Powered Features</h2>
            <p class="text-lg sm:text-xl text-white/80">Intelligent tools that adapt to your cognitive needs in real-time</p>
        </div>
        <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8">
            <!-- Feature 1 - ML Powered -->
            <div class="feature-card bg-white p-6 sm:p-8 rounded-2xl shadow-xl">
                <div class="bg-purple-100 w-14 h-14 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mb-4 sm:mb-6">
                    <svg class="w-7 h-7 sm:w-8 sm:h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                    </svg>
                </div>
                <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-3 sm:mb-4">Real-time Hesitation Detection</h3>
                <p class="text-sm sm:text-base text-gray-600">Our ML model detects when you're unsure and proactively suggests relevant tools and commands.</p>
                <div class="mt-4 p-3 bg-purple-50 rounded-lg">
                    <div class="flex items-center gap-2 text-sm text-purple-700">
                        <div class="w-2 h-2 bg-purple-500 rounded-full animate-pulse"></div>
                        <span>AI Confidence: <strong id="hesitationConfidence">92%</strong></span>
                    </div>
                </div>
            </div>

            <!-- Feature 2 - Cognitive Accessibility -->
            <div class="feature-card bg-white p-6 sm:p-8 rounded-2xl shadow-xl">
                <div class="bg-purple-100 w-14 h-14 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mb-4 sm:mb-6">
                    <svg class="w-7 h-7 sm:w-8 sm:h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                    </svg>
                </div>
                <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-3 sm:mb-4">Adaptive Interface</h3>
                <p class="text-sm sm:text-base text-gray-600">The interface automatically adjusts complexity based on your interaction patterns and cognitive load.</p>
                <div class="mt-4 flex gap-2">
                    <button onclick="setCognitiveMode('simple')" class="text-xs px-3 py-1 bg-gray-200 rounded-full hover:bg-gray-300">Simple</button>
                    <button onclick="setCognitiveMode('standard')" class="text-xs px-3 py-1 bg-purple-600 text-white rounded-full">Standard</button>
                    <button onclick="setCognitiveMode('detailed')" class="text-xs px-3 py-1 bg-gray-200 rounded-full hover:bg-gray-300">Detailed</button>
                </div>
            </div>

            <!-- Feature 3 - Command Prediction -->
            <div class="feature-card bg-white p-6 sm:p-8 rounded-2xl shadow-xl">
                <div class="bg-purple-100 w-14 h-14 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mb-4 sm:mb-6">
                    <svg class="w-7 h-7 sm:w-8 sm:h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                </div>
                <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-3 sm:mb-4">Smart Command Prediction</h3>
                <p class="text-sm sm:text-base text-gray-600">AI predicts your next actions and surfaces relevant tools before you need to search for them.</p>
                <div class="mt-4 p-3 bg-green-50 rounded-lg">
                    <div class="text-sm text-green-700">
                        <span>Next likely tools: </span>
                        <span class="font-semibold">Brush, Layers, Color Picker</span>
                    </div>
                </div>
            </div>

            <!-- ... rest of your feature cards ... -->
        </div>
    </section>

    <!-- ML System Status Section -->
    <section class="relative z-10 bg-white/5 backdrop-blur-lg py-12 sm:py-16">
        <div class="container mx-auto px-4 sm:px-6">
            <div class="text-center mb-8">
                <h2 class="text-2xl sm:text-3xl font-bold text-white mb-4">Neuropilot AI System Status</h2>
                <p class="text-white/80">Real-time monitoring of our machine learning infrastructure</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 max-w-4xl mx-auto">
                <div class="bg-white/10 rounded-2xl p-6 text-center border border-white/20">
                    <div class="text-2xl font-bold text-white mb-2" id="modelAccuracy">96.7%</div>
                    <div class="text-white/70 text-sm">Prediction Accuracy</div>
                </div>
                <div class="bg-white/10 rounded-2xl p-6 text-center border border-white/20">
                    <div class="text-2xl font-bold text-white mb-2" id="responseTime">47ms</div>
                    <div class="text-white/70 text-sm">Avg Response Time</div>
                </div>
                <div class="bg-white/10 rounded-2xl p-6 text-center border border-white/20">
                    <div class="text-2xl font-bold text-white mb-2" id="activeUsers">2.4K</div>
                    <div class="text-white/70 text-sm">Active Sessions</div>
                </div>
                <div class="bg-white/10 rounded-2xl p-6 text-center border border-white/20">
                    <div class="text-2xl font-bold text-white mb-2" id="suggestionsToday">12.5K</div>
                    <div class="text-white/70 text-sm">Suggestions Today</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Rest of your existing sections (Testimonials, About, CTA, Footer) remain the same -->
    <!-- ... -->

    <script>
        // Neuropilot ML Integration
        class NeuropilotIntegration {
            constructor() {
                this.interactionHistory = [];
                this.lastInteraction = Date.now();
                this.cognitiveMode = 'standard';
                this.setupEventListeners();
                this.updateSystemStatus();
            }

            setupEventListeners() {
                // Track user interactions for ML analysis
                document.addEventListener('mousemove', this.throttle(this.trackInteraction.bind(this), 1000));
                document.addEventListener('click', this.trackInteraction.bind(this));
                document.addEventListener('keydown', this.trackInteraction.bind(this));
                
                // Update ML status periodically
                setInterval(() => this.updateMLStatus(), 5000);
            }

            throttle(func, limit) {
                let inThrottle;
                return function() {
                    const args = arguments;
                    const context = this;
                    if (!inThrottle) {
                        func.apply(context, args);
                        inThrottle = true;
                        setTimeout(() => inThrottle = false, limit);
                    }
                }
            }

            trackInteraction(event) {
                this.lastInteraction = Date.now();
                this.interactionHistory.push({
                    type: event.type,
                    timestamp: Date.now(),
                    target: event.target?.tagName
                });

                // Keep only last 100 interactions
                if (this.interactionHistory.length > 100) {
                    this.interactionHistory.shift();
                }

                // Simulate ML analysis
                this.analyzeBehaviorPatterns();
            }

            async analyzeBehaviorPatterns() {
                const inactivityTime = (Date.now() - this.lastInteraction) / 1000;
                
                if (inactivityTime > 3) {
                    // Simulate hesitation detection
                    this.showSuggestions(['Try the brush tool', 'Adjust layers', 'Color palette']);
                }
            }

            async showSuggestions(suggestions, confidence = 0.87) {
                const panel = document.getElementById('aiAssistant').querySelector('.suggestion-panel');
                const list = document.getElementById('suggestionList');
                const confidenceEl = document.getElementById('confidenceScore');
                const timeEl = document.getElementById('suggestionTime');

                list.innerHTML = '';
                suggestions.forEach(suggestion => {
                    const item = document.createElement('div');
                    item.className = 'suggestion-item p-3 rounded-lg bg-white border border-gray-200 cursor-pointer hover:bg-purple-50 text-sm';
                    item.textContent = suggestion;
                    item.onclick = () => this.applySuggestion(suggestion);
                    list.appendChild(item);
                });

                confidenceEl.textContent = Math.round(confidence * 100) + '%';
                timeEl.textContent = new Date().toLocaleTimeString();
                
                panel.style.display = 'block';
            }

            applySuggestion(suggestion) {
                // Implement suggestion application logic
                console.log('Applying suggestion:', suggestion);
                this.hideSuggestions();
            }

            hideSuggestions() {
                document.getElementById('aiAssistant').querySelector('.suggestion-panel').style.display = 'none';
            }

            async updateMLStatus() {
                try {
                    const response = await fetch('/ml/status/');
                    const data = await response.json();
                    
                    const statusIndicator = document.getElementById('mlStatus');
                    if (data.model_loaded) {
                        statusIndicator.className = statusIndicator.className.replace('ml-status-inactive', 'ml-status-active');
                    }
                } catch (error) {
                    console.log('ML status check failed:', error);
                }
            }

            updateSystemStatus() {
                // Simulate real-time system metrics
                setInterval(() => {
                    document.getElementById('modelAccuracy').textContent = (96 + Math.random() * 0.7).toFixed(1) + '%';
                    document.getElementById('responseTime').textContent = Math.floor(40 + Math.random() * 15) + 'ms';
                    document.getElementById('activeUsers').textContent = (2.3 + Math.random() * 0.3).toFixed(1) + 'K';
                    document.getElementById('suggestionsToday').textContent = Math.floor(12000 + Math.random() * 1000).toLocaleString();
                }, 3000);
            }
        }

        // Global functions for HTML onclick handlers
        function toggleAssistant() {
            const panel = document.getElementById('aiAssistant').querySelector('.suggestion-panel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        function hideSuggestions() {
            document.getElementById('aiAssistant').querySelector('.suggestion-panel').style.display = 'none';
        }

        function setCognitiveMode(mode) {
            neuropilot.cognitiveMode = mode;
            // Update UI to reflect mode change
            document.querySelectorAll('[onclick*="setCognitiveMode"]').forEach(btn => {
                btn.className = btn.className.replace('bg-purple-600 text-white', 'bg-gray-200');
            });
            event.target.className = event.target.className.replace('bg-gray-200', 'bg-purple-600 text-white');
        }

        async function runDemoPrediction() {
            const demoConfidence = document.getElementById('demoConfidence');
            demoConfidence.textContent = Math.floor(80 + Math.random() * 15) + '%';
            
            // Simulate API call to your ML endpoint
            try {
                const response = await fetch('/ml/predict/', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        inactivity_time: Math.random() * 10,
                        tool_id: Math.floor(Math.random() * 20),
                        cursor_velocity: 10 + Math.random() * 20,
                        click_frequency: 1 + Math.random() * 5,
                        session_duration: 300,
                        recent_commands: [1, 5, 2, 8]
                    })
                });
                
                const data = await response.json();
                if (data.success) {
                    neuropilot.showSuggestions(
                        ['Try the selection tool', 'Add new layer', 'Adjust brightness'],
                        data.prediction.confidence
                    );
                }
            } catch (error) {
                console.log('Demo prediction failed:', error);
            }
        }

        // Initialize Neuropilot when page loads
        let neuropilot;
        document.addEventListener('DOMContentLoaded', function() {
            neuropilot = new NeuropilotIntegration();
            
            // Your existing counter animation code
            const counters = document.querySelectorAll('.counter');
            counters.forEach(counter => {
                const target = parseInt(counter.getAttribute('data-target'));
                let count = 0;
                const increment = target / 100;
                
                const updateCount = () => {
                    if (count < target) {
                        count += increment;
                        counter.innerText = Math.ceil(count) + (target > 100 ? '+' : '%');
                        setTimeout(updateCount, 20);
                    } else {
                        counter.innerText = target + (target > 100 ? '+' : '%');
                    }
                };
                
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            updateCount();
                            observer.unobserve(entry.target);
                        }
                    });
                });
                
                observer.observe(counter);
            });
        });
    </script>
</body>
</html>